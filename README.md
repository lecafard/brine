brine
=====

A TCP relay server which implements Google's SSH over HTTP ![relay server protocol](https://chromium.googlesource.com/apps/libapps/+/master/nassh/doc/relay-protocol.md).

**WARNING**: The security of this application hasn't been verified, and there is also no authentication built-in.
Please use at your own risk.

This is designed to be run behind an authenticating reverse-proxy such as nginx with basic authentication or
auth_request. A sample nginx configuration is shown below.

```nginx
server {
    listen 80;
    server_name auth.example.com;

    # ideally use TLS
    auth_basic_user_file /etc/nginx/htpasswd;

    location / {
        proxy_pass http://localhost:8086;
        auth_basic "Login Required";
    }

    # This endpoint should be reachable without credentials, the temporary session id
    # generated by /proxy should be sufficient
    location = /connect {
        proxy_pass http://localhost:8086/connect;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
        proxy_buffering off;
    }
}
```
